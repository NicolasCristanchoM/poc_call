# Use the official lightweight Python image.
FROM python:3.12-slim

# Allow statements and log messages to immediately appear in the logs
ENV PYTHONUNBUFFERED True
# Establecer la zona horaria
ENV TZ=America/Bogota

# Puerto por defecto que usará la aplicación
ENV PORT 8080
ENV HOST 0.0.0.0

# Crear y establecer el directorio de trabajo
ENV APP_HOME /app
WORKDIR $APP_HOME

# Copiar el código al contenedor
COPY . ./

# Instalar las dependencias
RUN pip install --no-cache-dir -r requirements.txt

# Exponer el puerto en el contenedor
EXPOSE 8080
# CMD [ "python3", "main.py"]
# Ejecutar Gunicorn en el inicio del contenedor
CMD ["uvicorn", "fast_api:app", "--host", "0.0.0.0", "--port", "8080"]